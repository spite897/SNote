# buildLog
- program: **lua_basis_3** 
- from: **runoob** 
- status: **building** 

-----------------------------------------------------------------------------

#### 泛型for

`for iterator`

`for <vars> in func() do <statement> end` =>

`for <vars> in <迭代函數>,<狀態常量>,<控制變量> do <statement> end` =>

**Loop** `<vars> = <迭代函數>(<狀態常量>, <控制變量>)` && `返回的第一個值不爲nil`
do `<statement>` end

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

1. **無狀態的迭代器**

```lua
-- ipairs函數的一種實現
function iter(table, index)
    index = index + 1
    local v = table[index]
    if v != nil then
        return index, v
    end
end
function ipairs(table)
    return iter, table, 0
end
```

2. **多狀態的迭代器**
 
即需要保存多個狀態信息
 
```lua
--使用閉包實現的多狀態迭代器
function ipairs(table)
    local index = 0
    local count = #table
    
    return function()
        index = index + 1
        if index <= count then
            return index, table[index]
        end
    end
end
```

-----------------------------------------------------------------------------

### 模塊

`編寫模塊`

```lua
-- <module_file_name>
<pack_name> = {}
-- ...定義等等
return <pack_name>
```

`使用模塊`

```lua
require "<module_file_name>"
```

> require 載入文件並執行代碼塊 相同文件只執行一次

-----------------------------------------------------------------------------
