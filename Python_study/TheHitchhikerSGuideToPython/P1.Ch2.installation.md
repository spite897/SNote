- date: 250618
# P1.Ch2.Installation

> briefcut: 
> - CPython, pip, Setuptools, virtualenv installation on Mac, Linux, Win

-----------------------------------------------------------------------------
-----------------------------------------------------------------------------

### Mac OS X

> E1 Captian 帶有一個特有的CPython 2.7 ：
> - 擁有一些 Mac 專有庫
> - http://bit.ly/sticking-with-apples-python  -- 更多特性Mac Python 介紹

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

### Python

> cut: 通過包管理器Homebrew 安裝Python正式版

0. 前置

安裝 Xcode or osx-gcc-installer

1. 安裝包管理器 Homebrew

```terminal
$ BREW-URI="https://raw.githubusercontent.com/Homebrew/install/master/install"
$ ruby -e "$(curl -fsSL ${BREW-URI})"
```

將其路徑插入到PATH最前面 以正確使用新安裝的Python並防止修改原有Python

```shell
#~/.profile
export PATH=/usr/local/bin:/usr/local/sbin:$PATH
```

2. 通過包管理器安裝Python
```terminal
$ brew install Python3
```

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

### Setuptools + pip

隨 Homebrew 安裝 Python2/3 時自動安裝 pip3/pip Setuptools

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

### virtualenv

```terminal
$ pip3 install virtualenv
```

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

> 不要同時安裝 Xcode, osx-gcc-installer 以避免某種難以避免的bug
> 
> Python將被安裝到 `/usr/local/Collar/python3`
> - 並被鏈接到 `/usr/local/python`
> 
> pip 使用 `--user`(局部安裝) 需繞過 distutils Homebrew 相關的bug 或使用 venv 解決

-----------------------------------------------------------------------------

### Linux

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

### Python

使用不同發行版的包管理器安裝。

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

### Setuptools + pip

使用如下方法獲得最新版pip，這個過程也會安裝Setuptools
```teriminal
$ wget https://bootstrap.pypa.io/get-pip.py
$ sudo python3 get-pip.py
```

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

###  virtualenv

通過包管理器安裝

```terminal
$ <PM> install python-virtualenv
```

通過pip安裝

```terminal
$ pip3 install --user virtualenv
```

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

> 類Unix 系統推薦在 shebang 符號中指定 Python2 (PEP 394)
> ```Python
> #!/usr/bin/env Python2
> ```

-----------------------------------------------------------------------------

### Windows

選擇使用商業化發行版或標準 CPython

- 標準實現
- - 進行 C 擴展開發
- - 配合付費版 Visual Cpp
- - 配合 MinGW
- - 使用 pip 安裝二進制版的 C 庫
- 商發版
- - 幫助編譯鏈接C庫的工具
- - 不同發行版的特徵

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

### 安裝標準 CPython

在官網下載 MSI 包安裝程序

添加到PATH `C:\Python<version>\;C:\Python<version>\Scripts\`

> 有些包將命令文件放在後者

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

### Setuptools + pip

MSI 安裝同時自動安裝

手動安裝: 使用 get-pip.py

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

### virtualenv

```terminal
$ pip install virtualenv
```

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

### 安裝商業化發行版 CPython

a. Python by Intel

高性能 免費 使用 Conda + pip SciPy技術棧 使用原生庫(e.g.: Intel數學核心庫 MKL
) 多線程增強(Intel線程構件庫 TBB)

b. Anaconda by Continuum Analytics

BSD許可證 大部分免費 綁定IDE(Spyder) SciPy技術棧

c. ActivePython by ActiveState

ActiveState社區許可證 付費使用 爲 Perl 和 Tcl 提供解決方案 寬泛的賠償條款

d. Canopy by Enthought

Canopy軟件許可證 免費教學使用 圖形化交互工具 類似MATLAB的IDE

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -


> 提供wheels獲取二進制C庫
>
> 推薦使用32位Python 某些包只有32位版本
> 
> win 平台無需區分 pip3 和 pip
> 
> 不要修改商發版默認配置 以便退回標準版
> 
> Conda 也能模擬 venv 類似 Buildout

-----------------------------------------------------------------------------

### 開發工具

編譯 C 擴展常用程序包

- 併發工具
- - threading       線程庫
- - asyncio         事件處理庫
- - curio           基於協議的網絡庫
- - gevent          基於協議的網絡庫
- - Twisted         事件驅動的網絡庫
- 科學分析
- - NumPy           線性代數庫
- - SciPy           數據處理庫
- - scikit-learn    機械學習庫
- - Matplotlib      繪圖庫
- 數據庫接口
- - h5py            HDF5格式數據庫
- - Psycopg         PostgreSQL數據庫
- - SQLAlchemy      關係映射庫

```Terminal
$ <PM> install python3-devel
$ pip3 install --user desired-package
```

-----------------------------------------------------------------------------
-----------------------------------------------------------------------------

> 最佳實踐1： 除 virtualenv virtualenvwrapper 外不全局安裝任何東西
> 
> pip 與 Setuptools 相比
> - pip 可以回退失敗安裝 防止部分安裝bug
> - pip 可以進行卸載
> - http://bit.ly/pip-vs-easy-install
> 
> 不要將Python可執行文件鏈接向其他某個版本（quotation 銀河系漫遊指南）
>
> 分發 Python 項目需提供的信息
> - https://packaging.python.org/en/latest/distributing.html
> - PEP 302 241
>
> Christoph Gohlke 資源站點
